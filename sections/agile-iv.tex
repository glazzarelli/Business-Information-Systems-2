\section{Agile - IV Lecture}

\subsection{Agile and Scrum}

\subsubsection{Product Backlog and User Stories}

So far, we have accomplished writing the product backlog. Now, let's
focus on how to write a user story. This task can be challenging because
it requires being concise and specific. A user story is more like a
specification than a requirement. When writing a user story, it is
important to be clear about what you want to achieve.

\begin{figure}[!h]
    \centering
    \includegraphics[page=36, trim = 0.5cm 3.7cm 2cm 3.5cm, clip, width=\textwidth]{images/08 - Bruna_scrum.pdf}
\end{figure}

To ensure clarity, you can follow a practical approach. Start by writing
the user story in the backlog. As you write, consider whether you will
be able to understand the meaning of the story if you were to read it
again in two months. If the answer is no, then the story needs to be
rewritten in a more effective manner. On the other hand, if the answer
is yes, then the story is likely well-written.

\subsubsection{Writing Effective User Stories}

Is a user story enough for a team? No, the implementation requires more
than just the story itself. In Agile and Scrum, you can analyze and
implement the user story in the same sprint. First, you select the user
story and include it in the sprint. Then, you analyze it in detail to
understand its complexity and estimation. However, a common challenge
arises when the team fully understands the details of the user story, as
this is when the actual complexity becomes apparent.

To address this, a pragmatic practice is to treat the analysis and
implementation as separate streams, even if it deviates slightly from
the theoretical perspective of the methodology. Instead of having two
separate teams, think of them as two different streams.

\subsubsection{Backlog Refinement and Sprint Planning}

In the Agile and Scrum framework, the development team, product owner,
and analysts work together to understand requirements and create
detailed specifications. During the first sprint, the team can conduct
an analysis sprint to produce an outcome that will be used by the
developers in the second iteration. This detailed information will be
available when planning the next sprint, ensuring that the stories for
development in the second sprint are well-defined.

\subsubsection{Practical Tips for User Stories}

In the first sprint, the team works on user stories, while in the second
sprint, they focus on detailed analysis and documentation for the next
set of user stories. This creates a pipeline where analysis is done
before development. Although this approach has some similarities to the
waterfall model, it is acceptable in Agile projects. However, some Agile
purists may argue that there are negative consequences to this way of
working. Ideally, the analysis and implementation should be done in
separate parts of the sprint. However, it can be challenging to organize
this when there are people dedicated to analysis and others dedicated to
implementation.

\subsubsection{Sprint Execution and Analysis}

If you haven't planned what will be included in the second sprint, it's
likely that the team will start working on whatever is available. This
can create a dependency or a pipeline similar to the waterfall approach.
However, if you're concerned about introducing waterfall practices, you
can mitigate this by keeping the length of your sprints short.

\subsubsection{Challenges with User Stories and Estimations}

Shorter sprints provide better control over projects because there is
less to estimate and organize within a shorter timeframe. With fewer
user stories, it is easier to estimate the work involved. Shorter
sprints also allow for more agility and responsiveness. If any issues
arise during the first week, adjustments can be made for the second
sprint. However, there are some drawbacks to shorter sprints. The time
spent on sprint planning, review, and retrospective leaves less time for
actual implementation and development. For example, if a week-long
sprint is considered, half a day is spent on planning, half a day on
review, and some time on retrospective. This leaves only three and a
half days for development. Despite the advantages of control, shorter
sprints also come with additional overhead.

In the past, I worked with a team that struggled with estimation. We
were unable to accurately estimate tasks, resulting in incomplete
stories within the sprint. To address this issue, our Scrum Master
decided to shorten the sprint duration. We experimented with one-week
sprints, but even then, we made mistakes in estimation. Eventually, we
resorted to one-day iterations, with planning and review sessions held
each day.

\subsubsection{Sprint Review and Retrospective}

The Scrum Master plays a crucial role in bringing rhythm to the project.
While it is common to write user stories in a specific format, with the
typical user and their desired functionality, it is not mandatory.
Technical stories, for example, do not follow this format. The most
important aspect of a user story is the acceptance criteria, which
provide a clear description of what needs to be done. This creates a
sense of comfort for the team, as they have a solid understanding of
what is expected and can confidently declare a task as complete. It
serves as a contract between the team and the product owner. By
prioritizing and estimating tasks, the team can create a list of items
to work on and track their progress.

\subsubsection{The Role of the Scrum Master}

In Agile and Scrum, the role of the Scrum Master is crucial in ensuring
effective communication and time management. One of the key
responsibilities of the Scrum Master is to facilitate the daily meeting,
also known as the stand-up meeting. This meeting is designed to be short
and focused, encouraging team members to provide concise updates on
their progress.

To maintain efficiency, the Scrum Master may use a few techniques. One
approach is to pass around a ball, allowing only one person to speak at
a time. Another method is to conduct the meeting in a standing position,
which helps keep the discussions brief and to the point. It's important
for everyone to actively participate and use their three minutes to
provide the necessary information.

During the daily meeting, the Scrum Master plays a vital role in
preventing discussions from becoming too detailed or time-consuming. If
team members need to exchange detailed information, the Scrum Master may
suggest that they meet separately, ensuring that they don't waste the
time of other team members. The Scrum Master is responsible for
timekeeping and ensuring that all events are time-boxed, meaning they
have a set duration.

Unlike the traditional waterfall model, where the project plan is fixed,
Agile and Scrum embrace change. This means that the roadmap, which
outlines the project's direction, can evolve with each sprint. Unlike
traditional project management methods, Agile allows for flexibility and
adaptation.

To visualize the project plan, a Gantt diagram can be used. However,
it's important to note that in Agile, the roadmap is not set in stone.
Changes and adjustments are expected as the project progresses.

By embracing Agile and Scrum, teams can foster effective communication,
adapt to changes, and ensure that projects are delivered successfully.
The Scrum Master plays a crucial role in facilitating these processes
and keeping the team focused and efficient.

\subsubsection{Agile Project Management and Business}

One of the responsibilities of the Scrum Master is to provide business
updates on the progress of the project. Contrary to the belief that
Agile projects are disorganized compared to Waterfall projects, Agile
actually promotes clear organization and transparency. By clearly
defining the work to be done in each iteration, such as completing three
user stories estimated to take three days each, the Scrum Master can
create a sprint burndown chart. This chart shows the progress of the
project by indicating how many stories have been completed and how much
effort has been expended on each item. It also shows the remaining work.
The ideal trend is for the remaining work to decrease over time.

The chart can be created at the sprint level or at the project level,
although the example provided is at the project level. It represents
multiple sprints. By analyzing the chart, you can gather valuable
information about the project's health. For instance, if the remaining
work is consistently below the estimation, the project is in good
health. However, if the remaining work starts to exceed the estimation,
it indicates a potential delay. The chart also highlights significant
events, such as when the team closed some stories or made remarkable
progress on a Monday, resulting in a recovery of the project's timeline.

Another line on the chart represents the scope of the project, which is
the sum of the estimated items in the project backlog. Initially, the
starting backlog is written, but as the project progresses, it is common
to realize that additional work is needed. This leads to an increase in
the scope. However, the goal is for the scope to stabilize and
eventually decrease as the project nears completion. This fluctuation in
the scope is a normal occurrence in projects.

Overall, the sprint burndown chart provides valuable insights into the
progress and health of the project, allowing the Scrum Master to
effectively communicate this information to the business stakeholders.

\subsubsection{Technical Debt and Its Impact}

In Agile and Scrum, it is crucial to analyze why the team is unable to
deliver value consistently. This is not an empty project; it requires a
thorough examination with the Scrum Master and the team to understand
the underlying issues. One common problem is the team's inability to
complete user stories. Unlike traditional waterfall projects, Agile
methodologies allow for early detection of project deviations. After a
few iterations, you can assess the project's progress, evaluate the
team's capacity and skills, and determine if additional resources are
needed to increase velocity. Techniques like pair programming can be
employed to transfer knowledge and support less experienced team
members. By using diagrams, you can communicate with the business and
request additional resources if necessary. However, in Agile, the
deadline remains fixed, so if the project is falling behind schedule, it
is important to discuss with the customer and consider reducing the
scope to meet the initial deadline. This example highlights the
importance of closing tasks iteration after iteration.

\subsubsection{Technical Debt Types and Trade-offs}

Sometimes, people fail to log their work properly, resulting in the
closure of everything in one day. This behavior can be avoided by
consistently using the tools to log work. In Agile and Scrum, if a team
is unable to complete a story within a sprint, even if they have
completed 90\% of it, the story is considered not yet started. The team
can gain more time to complete it in the next iteration. However, this
practice should be used cautiously, as it may indicate underlying issues
that need to be addressed in the second iteration.

If new requirements arise during a sprint, they are added to the product
backlog without changing the scope of the current sprint. This protects
the team from disruptions during the sprint. It is not allowed for
someone to approach the team and ask them to work on the new requirement
instead of the planned work. This practice, known as waterfall
management, can create problems within the team. However, if an
unexpected event occurs during the sprint that requires a change in
plans, the team can decide together how to handle it. For example, if a
tornado is expected to hit the house of the Chief Officer on the day of
an event, the team may need to rearrange their plans and organize
something indoors instead of outdoors. This is considered an external
disruptive event, and it can affect the project burn down chart. The
green line in the burn down chart represents the ideal progress of the
project.

During the project, you can use Instagram as a tool to provide updates
on the progress of the tasks. The final meeting in the project is the
retrospective, where you reflect on the project as a whole.

Let's consider an example to understand the process better. Imagine you
are creating a roadmap for your project. Once you have prepared your
backlog, you can proceed with the sprint planning. During this planning
session, you collaborate with your team to determine which stories will
be included in the sprint.

After the planning, you move on to the sprint itself. At the end of the
sprint, you conduct a review where each task is demonstrated to the
product owner. This demonstration can take place in an integration
environment or directly on your laptop. The product owner then evaluates
and accepts or rejects the implementation.

If you have any questions about the methodology, feel free to ask.
Implementing Scrum can be challenging for a team that has never used it
before. It took my company at least 5 years of projects to become
proficient in its use. Sometimes, certain aspects of the methodology may
be overlooked or not followed strictly. For example, one major obstacle
for someone accustomed to the waterfall approach is the need for a
cultural change. This change affects the entire organization.

Developers often appreciate the Scrum approach because it allows for
better process management and creates a more transparent environment. In
a Scrum team, the product manager does not need to review the code of
other team members, as the product owner is responsible for the
development. This dynamic is not possible in a traditional waterfall
approach.

In Scrum, every interaction within the team is regulated by the
methodology. During the retrospective, every team member has the right
to raise concerns and suggest improvements, regardless of their level of
experience. This inclusivity allows for a more diverse range of
perspectives and experiences to be shared.

In contrast, I have seen many projects where only senior members of the
team were given a voice, excluding valuable input from junior members or
those who joined the company from other organizations. This is a
significant advantage of the Scrum methodology.

Another advantage is at the contractual level, although it requires a
cultural shift. Let me provide an example. Imagine you are the CFO of a
company and you need to sign a contract for a project. Typically, the
projects I work on range from 1 to 5 million euros. In a traditional
approach, you would create a contract with a fixed scope, timeline, and
budget. However, this poses a significant risk for both the signing
company and the implementing company. How can you accurately estimate
everything without any prior knowledge? It is common for projects to
experience delays and require additional time and budget.

On the other hand, when you buy a car, you expect to know the exact
price, not just an estimate. Why is it not possible to have the same
certainty for a 5 million euros project? The reason is that producing a
car is an industrial process with thousands of units being manufactured.
However, the project you are working on is more like an artisanal
activity, where each project is unique.

If you were to ask an artisan how much a chair would cost, they might
give you an estimate based on their experience. However, if they have
never built a chair before, their estimate could be significantly off,
resulting in cost overruns. Many companies have faced bankruptcy because
they relied on the best estimates provided by the waterfall methodology.

In contrast, an agile approach allows for a more realistic estimation.
You can say, ``Based on my analysis, my best estimate is this, but there
is a margin of error. It could be 5\% over or 1.4\% under the estimated
price.'' If you need a more accurate estimation, we can work together on
two iterations of analysis. I will thoroughly analyze everything and
create a prototype that may even become part of the final product.

After two iterations, I can provide you with a detailed backlog. The
output of the first iteration is the backlog itself, which allows for
better estimation. If you need more precise estimation, we can do one
more iteration. If you are satisfied with my work, we can continue
working together. If not, I can provide you with a ready backlog that
you can give to another company to continue from there. The fact that
each iteration produces a potentially shippable product immediately adds
value to the company. This makes it easier to sign agile contracts, even
if it means providing a cost estimate and deadline. Trying to create a
perfect diagram for a two-year project is unrealistic and often leads to
overestimation. By working collaboratively and focusing on the most
important aspects of the project, you can be more flexible and avoid
signing unnecessary contracts. This approach reduces risks for both the
company and the team.

Regarding maintaining software in production, if a bug is found, it can
be addressed within a 15-minute time frame. A good Scrum Master will
ensure that team members stay focused during daily meetings and limit
their discussions to three minutes each. This helps synchronize the team
and avoid going into too much detail. Successful teams often have
capable Scrum Masters who can identify and address underperforming team
members. The Scrum Master's role is not to produce code or analyze the
domain but to facilitate the process and measure performance. They work
closely with the product owner to ensure smooth collaboration. Agile
methodologies were invented by Japanese developers based on lean
principles. These methodologies have been proven to increase efficiency
and reduce development time. Companies like SpaceX and Apple have
embraced agile methodologies to stay competitive. Scrum Masters play a
crucial role in removing middle management and fostering direct
communication between team members and higher-level executives. Agile
methodologies are not just about transparency and clarity but also about
making more money and being faster than competitors. It is important to
distribute responsibility and involve the entire team in estimations,
rather than relying solely on one person's expertise. The objective of
introducing agile methodologies is to provide an understanding of the
concepts and encourage their implementation in future projects. This can
be applied to projects within your career or collaborations with
colleagues. The next topic is microservices.


\subsection{Microservices}

\subsubsection{Questions on Development Background}

In the context of organizations, agile projects are commonly used to
develop complex business information systems. These systems are
typically intricate applications that require careful technical design.
So, I would like to ask again, how many of you have experience coding in
any programming language?

Let's try again, shall we? In what programming language did you
implement your web application? Ah, Java! A classic choice. Java has
been around for quite some time now. So, tell me, what kind of
application did you build? Was it a typical web application with a fancy
user interface? Ah, I see. And on the client side, did you use React?
No? Well, React is quite popular these days. It's a JavaScript library
for building user interfaces. Speaking of JavaScript, did you use
JavaScript or TypeScript for your project? JavaScript, huh? I remember
the days when writing JavaScript without the help of an IDE could be
quite tricky. One missing semicolon and the whole code would break.
Anyway, let's move on.

Now, I want to talk to you about software architecture. I don't expect
you to become an expert in microservices architecture right away. It's a
vast topic. My goal is to help you understand the importance of software
architecture. If you don't implement things the right way, you can lose
control over your project. Of course, if you're building a simple MVC
web application, it may not be a big issue. Let's move on to the slides
and dive deeper into the world of web development.

\subsubsection{Static Websites}

\begin{figure}[!h]
    \centering
    \includegraphics[page=3, trim = 2.5cm 7cm 1.5cm 4cm, clip, width=\textwidth]{images/09 - Bruna_microservices.pdf}
\end{figure}

On the right side, there is a browser that sends HTTP protocol requests
to our web servers. A web server is a software running on a server,
listening on a specific port. It uses the HTTP protocol to exchange
formatted strings with the browser. When a resource is requested, the
web server searches for it in the file system and returns it as a text
string to the browser. The browser then translates this text into a
graphical representation.

This is an example of a static website, meaning it doesn't have any
business logic implemented. However, static websites are still widely
used today, especially for applications that generate static files as
output. These static files can be served efficiently with high
performance. For instance, news sites like Corriere.it are served by
static web servers. Content delivery networks (CDNs) may also be used in
conjunction with static applications. The main idea is to serve a static
application.

\subsubsection{Web Applications}

\begin{figure}[!h]
    \centering
    \includegraphics[page=4, trim = 2.5cm 2.9cm 1.5cm 4cm, clip, width=\textwidth]{images/09 - Bruna_microservices.pdf}
\end{figure}

If you want to serve real-time information generated by your business
logic, the architecture is slightly different. The browser sends the
request to an application server instead of a web server. Inside the
application server, you have the business logic that typically queries a
database for information. The result of the query is then returned to
the business logic, which transforms it into a presentation using
HTML. HTML is a language that can be used on top of HTTP protocol to
represent pages, and the page is rendered in the browser. In this case,
instead of serving a static file, you are dynamically generating it.

To avoid having multiple people working on the same code with different
objectives, it is better to create a more complex architecture with
different components and assign specific responsibilities to each
component. This is where design patterns come into play. Design patterns
were invented to help create more complex architectures and allocate
precise responsibilities to each component.

\subsubsection{Monolithic vs Microservices Architecture}

\begin{figure}[!h]
    \centering
    \includegraphics[page=5, trim = 2.5cm 3cm 1.5cm 4cm, clip, width=\textwidth]{images/09 - Bruna_microservices.pdf}
\end{figure}

The Model-View-Controller (MVC) design pattern was initially developed
for desktop applications but later adapted for web applications. In this
pattern, when a request is made in a web application, it goes through a
dispatcher component. The dispatcher determines the type of resource
being requested (e.g., page, image, JavaScript file) and invokes the
appropriate handler. The handler then calls the controller, which
coordinates the execution of the business logic. The controller
interacts with the dedicated business logic, retrieves data from the
database, and creates a model. The model is then passed to a view
resolver, which generates a view by combining the model's information
with a template. The MVC pattern consists of three main actors: the
model, the view, and the controller.

A simple example of the MVC pattern can be seen in frameworks like
Tomcat, with implementations such as Spring MOC (Model-View-Controller).
However, for more complex applications, a more intricate architecture is
required. The complexity of the application determines the complexity of
the architecture. If you attempt to implement a complex application
using a simple approach or only relying on MVC in PHP, you may encounter
limitations and code duplication. In such cases, you may need a common
component that can be used across different parts of the application.

\begin{figure}[!h]
    \centering
    \includegraphics[page=7, trim = 2.5cm 7.5cm 1.5cm 4cm, clip, width=\textwidth]{images/09 - Bruna_microservices.pdf}
\end{figure}

In a monolithic architecture, the layers of presentation, persistence,
and domain are all part of the same application. If a bug is introduced
in one part of the application, the entire application fails to compile,
and the pipeline cannot produce a new executable. While it is possible
to organize business logic and presentation logic into layers and
libraries, the monolithic architecture has inherent limitations. These
limitations will be discussed later. Essentially, a monolith refers to a
single executable.

\begin{figure}[!h]
    \centering
    \includegraphics[page=9, trim = 2.5cm 5cm 1.5cm 4cm, clip, width=\textwidth]{images/09 - Bruna_microservices.pdf}
\end{figure}

The monolithic architecture is a common approach in software
development, where all components of an application are bundled together
into a single executable. This includes the architectural layers such as
the model, view, controller, presentation layer, and data layer. While
this approach allows for easy development and higher initial
productivity, it also comes with its drawbacks.

\begin{figure}[!h]
    \centering
    \includegraphics[page=17, trim = 2.5cm 4cm 1.5cm 4cm, clip, width=\textwidth]{images/09 - Bruna_microservices.pdf}
\end{figure}

One of the main challenges with a monolithic architecture is
scalability. When scaling a monolith, you need to replicate the entire
application, even if only a small part of it requires more resources.
This can lead to inefficient resource usage. Additionally, if a new
version of a component is not compatible with other parts of the
monolith, upgrading becomes difficult.

\begin{figure}[!h]
    \centering
    \includegraphics[page=16, trim = 2.5cm 3.7cm 1.5cm 4cm, clip, width=\textwidth]{images/09 - Bruna_microservices.pdf}
\end{figure}

Another weakness of the monolithic architecture is the difficulty in
maintenance and evolution. With a large codebase and tightly coupled
components, making changes or adding new functionality can be complex
and time-consuming. Technical debt, which refers to the accumulation of
issues and shortcuts in the code, can also increase over time, making
maintenance even more challenging.

Team scalability is another concern with monolithic architectures. As
the team size grows, coordination and collaboration become more
difficult. Adding more people to work on the monolith can lead to
coordination problems and hinder productivity.

To address these weaknesses, many organizations are adopting a
microservices architecture. In this approach, the application is divided
into smaller, independent services that can be developed, deployed, and
scaled individually. This allows for better scalability, as resources
can be allocated specifically to the services that require them. It also
enables easier maintenance and evolution, as changes can be made to
individual services without affecting the entire application.
Additionally, the team scalability is improved, as smaller teams can
work on individual services independently.

\begin{figure}[!h]
    \centering
    \includegraphics[page=11, trim = 2.5cm 4.5cm 1.5cm 4cm, clip, width=\textwidth]{images/09 - Bruna_microservices.pdf}
\end{figure}

While the monolithic architecture has its advantages, such as higher
initial productivity and ease of development, it is important to
consider the long-term implications and potential challenges. Evaluating
the specific needs of the project and considering the scalability,
maintenance, and team collaboration requirements can help determine
whether a monolithic or microservices architecture is the best fit.

\subsection{Conclusion and Next Steps}

In the next session, we will continue our discussion on microservice
architecture and delve deeper into the topic. We will conclude our
discussion on this subject in the first hour, and in the remaining hour,
I will introduce you to some concepts related to development operations.
Thank you for your attention, and I look forward to our next session.
